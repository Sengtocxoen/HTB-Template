# Penetration Testing Framework

A comprehensive penetration testing framework designed for automated security assessments of Windows and Linux systems.

## Features

- **OS Detection**: Automatic detection of target operating system
- **Exploitation**: OS-specific exploitation modules for Windows and Linux
- **Post-Exploitation**: Comprehensive post-exploitation capabilities
- **Configuration Management**: Centralized configuration system
- **Reporting**: Detailed Markdown reports with findings

## Project Structure

```
pentest_framework/
├── main.py                 # Main entry point
├── stages/                 # Core testing modules
│   ├── exploitation.py     # Exploitation module (Windows/Linux)
│   └── post_exploitation.py # Post-exploitation module
├── utils/                  # Utility modules
│   ├── config.py          # Configuration management
│   └── htb_utils.py       # HTB-specific utilities
├── config/                 # Configuration files
│   ├── tools.yaml         # Tool configurations
│   ├── scan.yaml          # Scan configurations
│   ├── exploit.yaml       # Exploitation configurations
│   └── post_exploit.yaml  # Post-exploitation configurations
├── reports/               # Generated reports
└── logs/                  # Log files
```

## Installation

1. Clone the repository:
```bash
git clone <repository-url>
cd pentest_framework
```

2. Install required dependencies:
```bash
pip install -r requirements.txt
```

3. Ensure required tools are installed:
- nmap
- gobuster
- hydra

## Usage

Basic usage:
```bash
python main.py <target_ip>
```

With OS specification:
```bash
python main.py <target_ip> --os windows
```

With authentication:
```bash
python main.py <target_ip> --os windows --user admin --pass password123
```

## Configuration

The framework uses YAML configuration files located in the `config/` directory:

- `tools.yaml`: Tool paths and default arguments
- `scan.yaml`: Port lists and scan timeouts
- `exploit.yaml`: OS-specific exploitation settings
- `post_exploit.yaml`: Post-exploitation commands

## Modules

### Exploitation Module
- Windows exploitation (Domain Controller and Standalone Server)
- Linux exploitation (Web Server and Standard Server)
- Kernel vulnerability testing
- Service-specific exploitation

### Post-Exploitation Module
- System information gathering
- User account enumeration
- Network information collection
- Process and service enumeration
- Software inventory
- Scheduled task analysis

## Reports

Reports are generated in Markdown format and include:
- Target information
- Exploitation findings
- Post-exploitation results
- Timestamps and execution details

## Contributing

1. Fork the repository
2. Create a feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Disclaimer

This framework is for educational and authorized security testing purposes only. Always obtain proper authorization before testing any system.

## Acknowledgments

- Thanks to all the open-source tools and libraries that make this framework possible
- Special thanks to the security community for their continuous support and feedback

## HackTheBox Integration

### Prerequisites
1. Active HackTheBox VIP subscription
2. OpenVPN connection to HTB network
3. Python 3.8+ installed
4. Required tools installed (see Installation section)

### Using the Framework with HTB Machines

1. **Initial Setup**
```bash
# Connect to HTB VPN
sudo openvpn your-htb-vpn-file.ovpn

# Verify connection
ping 10.10.10.10  # Replace with target machine IP
```

2. **Basic Usage with HTB Machine**
```bash
# Run full assessment
python main.py 10.10.10.10 -o htb_results

# Run specific stages
python main.py 10.10.10.10 -s 1,2,3  # Run only first three stages
```

3. **Advanced Usage**
```bash
# Use custom profile
python main.py 10.10.10.10 -p web_application

# Use credentials if known
python main.py 10.10.10.10 -u admin -p password123

# Save detailed findings
python main.py 10.10.10.10 -o htb_results --detailed
```

### HTB-Specific Features

1. **Information Gathering Stage**
   - Port scanning with service detection
   - Web application enumeration
   - Directory bruteforcing
   - Technology stack identification

2. **Vulnerability Assessment**
   - Common HTB vulnerability checks
   - Web application vulnerabilities
   - Service misconfigurations
   - Default credentials

3. **Exploitation**
   - Automated exploit suggestions
   - Common HTB exploit patterns
   - Web application exploits
   - Service exploitation

4. **Post-Exploitation**
   - User enumeration
   - Privilege escalation checks
   - System information gathering
   - Flag location assistance

### Best Practices for HTB

1. **Before Starting**
   - Always check the machine's difficulty level
   - Review the machine's description
   - Note any special requirements
   - Check if the machine is retired

2. **During Assessment**
   - Keep notes of all findings
   - Document successful exploits
   - Save all outputs and screenshots
   - Follow the framework's stages

3. **After Completion**
   - Review the generated report
   - Document the complete path to root
   - Save all flags and proof
   - Clean up any created files

### Example Workflow

1. **Initial Reconnaissance**
```bash
# Start with information gathering
python main.py 10.10.10.10 -s 1 -o htb_results
```

2. **Vulnerability Assessment**
```bash
# Run vulnerability checks
python main.py 10.10.10.10 -s 2 -o htb_results
```

3. **Exploitation**
```bash
# Attempt exploitation
python main.py 10.10.10.10 -s 3 -o htb_results
```

4. **Post-Exploitation**
```bash
# Gather system information
python main.py 10.10.10.10 -s 4 -o htb_results
```

### Troubleshooting HTB Issues

1. **Connection Problems**
   - Verify VPN connection
   - Check machine status
   - Ensure correct IP address
   - Check firewall settings

2. **Tool Issues**
   - Update all tools
   - Check tool dependencies
   - Verify tool permissions
   - Check tool configurations

3. **Framework Issues**
   - Check Python version
   - Verify all dependencies
   - Check output directory permissions
   - Review log files 